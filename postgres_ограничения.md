## Ограничения

[К оглавлению...](/README.md)

### NOT NULL

- не даст добавить NULL-значения в это поле
- его рекомендуется сразу установить на все поля (кроме тех, где действительно нужен NULL)

```sql
CREATE TABLE coaches (
name VARCHAR(32) NOT NULL
);
```

### UNIQUE

- не даст добавить два одинаковых значения
- можно поставить сразу на несколько полей
- для него автоматически создаётся индекс
- несколько значений NULL считаются разными!

```sql
CREATE TABLE coaches (
name VARCHAR(32) NOT NULL,
email VARCHAR(32) UNIQUE
);
```

Кое-что о NULL

- Возьмем школьников
- Спросим у каждого про рост
- Два ответили ХЗ
- Означает ли это, что у них одинаковый рост (подсказка: ответ ХЗ)

NULL - это что-то вроде ХЗ. Поэтому два NULL не равны между собой: NULL != NULL -> true

### PRIMARY KEY

```sql
CREATE TABLE coaches (
name VARCHAR(32),
email VARCHAR(32),
PRIMARY KEY (name, email)
);
```

- можно поставить сразу на несколько полей
- эти поля становятся UNIQUE + NOT NULL
- в каждой таблице может быть не больше одного PK
- на практике чаще накладывается на суррогатное поле

### FOREIGN KEY

```sql
CREATE TABLE coaches (
name VARCHAR(32),
email VARCHAR(32),
user_id INTEGER REFERENCES users ON DELETE CASCADE,
PRIMARY KEY (name, email)
);
```

- гарантирует ссылочную целостность
- можно указать, что делать при изменении "родителя"
- не рекомендуется в highload-проектах (тогда целостность обеспечивается бэком)

### Практические советы

- установить PK / FK / NOT NULL / UNIQUE на стороне БД (база будет сама себя контролировать)
- для проектов под высокой нагрузкой минимизировать кол-во ограничений
